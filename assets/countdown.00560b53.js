import{J as Ne,S as W,i as z,s as Z,H as E,t as V,c as S,d as $,e as oe,n as D,f as x,x as Oe,y as J,I as re,b as I,l as N,v as $e,o as j,w as Se,h as Y,m as K,p as ee,K as Ue,L as De,M as je,N as xe,O as F}from"./index.f8521bb7.js";import{a as ae}from"./constants.0308c6af.js";function Q(e,{delay:t=0,duration:s=400,easing:i=Ne}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:i,css:a=>`opacity: ${a*n}`}}const Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAABFCAYAAADqxK6xAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AAAAtdEVYdENyZWF0aW9uIFRpbWUAVHVlIDI1IEphbiAyMDIyIDAxOjI5OjAxIEFNIENFVAadd9IAAAD5SURBVGiB7ZnBEoIwDERTh///ZT2BM8VqkKTpJvuOHqjLY0tpm4g8JRmP6D/gAUOhsMUO/6vO7a+rpjTVZOrsd3conbmUphgKhUmdsh7ie7dSmmIoFJw75V3Xz91KaYqhUGAoFLiiQIGhUOCXLwoMhcLkTvVw309NsCkfUppiKBSMTj36WrbB71YUXKXfNLXmxElTb0aGYru0Q1Nxhq5R2dQaBrRUNKX93ok53RhRyRRWh3oqmdI+w2sarWTKi6uzJXeTDoxX6SP6O+77fqMpPdou+BijKa+9b+vr0NQZKzO2VDa1d8nLjO0smNIUz6dQYCgUGAqFlKFej2UjlyJYf3gAAAAASUVORK5CYII=",Je="data:image/png;base64,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";function Ve(e){let t,s;return{c(){t=E("span"),s=V(e[0])},m(i,n){S(i,t,n),$(t,s)},p(i,[n]){n&1&&oe(s,i[0])},i:D,o:D,d(i){i&&x(t)}}}function qe(e,t,s){let{count:i=4096}=t,n=0;const a=Oe();let u=setInterval(()=>{s(0,n+=1024),n>i&&(s(0,n=i),clearInterval(u),a("done"))},10);return e.$$set=d=>{"count"in d&&s(1,i=d.count)},[n,i]}class He extends W{constructor(t){super(),z(this,t,qe,Ve,Z,{count:1})}}function le(e){let t,s,i,n,a,u,d;return a=new He({props:{count:131072}}),a.$on("done",e[3]),{c(){t=E("p"),s=V("CPU:\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0ARM Cortex-A9 QuadCore"),i=E("br"),n=V(`
    RAM Memory: `),Y(a.$$.fragment),u=V(" MB OK"),I(t,"class","specs svelte-1hd33nk")},m(m,w){S(m,t,w),$(t,s),$(t,i),$(t,n),K(a,t,null),$(t,u),d=!0},p:D,i(m){d||(N(a.$$.fragment,m),d=!0)},o(m){j(a.$$.fragment,m),d=!1},d(m){m&&x(t),ee(a)}}}function ce(e){let t;return{c(){t=E("p"),t.innerHTML=`Primary Device Boot: OK, HDD<br/>
      Secondary Device Boot: OK, SSD`,I(t,"class","devices svelte-1hd33nk")},m(s,i){S(s,t,i)},d(s){s&&x(t)}}}function he(e){let t;return{c(){t=E("p"),t.textContent="Starting...",I(t,"class","starting svelte-1hd33nk")},m(s,i){S(s,t,i)},d(s){s&&x(t)}}}function Be(e){let t,s,i,n,a,u,d,m,w,c,M,v,y,r,o=e[0]&&le(e),l=e[1]&&ce(),g=e[2]&&he();return{c(){t=E("img"),i=J(),n=E("div"),a=E("p"),u=E("img"),m=V(`
    BIOS sensual y modulable`),w=J(),o&&o.c(),c=J(),l&&l.c(),M=J(),g&&g.c(),v=J(),y=E("p"),y.innerHTML=`Pulsa DEL para entrar en BIOS<br/>
    Pulsa F1 para detectar teclado`,re(t.src,s=Je)||I(t,"src",s),I(t,"alt","Energy Star"),I(t,"class","energy svelte-1hd33nk"),re(u.src,d=Pe)||I(u,"src",d),I(u,"class","bios svelte-1hd33nk"),I(u,"alt","BIOS"),I(y,"class","bottom svelte-1hd33nk"),I(n,"class","content svelte-1hd33nk")},m(f,h){S(f,t,h),S(f,i,h),S(f,n,h),$(n,a),$(a,u),$(a,m),$(n,w),o&&o.m(n,null),$(n,c),l&&l.m(n,null),$(n,M),g&&g.m(n,null),$(n,v),$(n,y),r=!0},p(f,[h]){f[0]?o?(o.p(f,h),h&1&&N(o,1)):(o=le(f),o.c(),N(o,1),o.m(n,c)):o&&($e(),j(o,1,1,()=>{o=null}),Se()),f[1]?l||(l=ce(),l.c(),l.m(n,M)):l&&(l.d(1),l=null),f[2]?g||(g=he(),g.c(),g.m(n,v)):g&&(g.d(1),g=null)},i(f){r||(N(o),r=!0)},o(f){j(o),r=!1},d(f){f&&x(t),f&&x(i),f&&x(n),o&&o.d(),l&&l.d(),g&&g.d()}}}function Ge(e,t,s){const i=Oe();let{delay:n}=t,a=!1,u=!1,d=!1;setTimeout(()=>s(0,a=!0),n);function m(){setTimeout(()=>s(1,u=!0),1e3),setTimeout(()=>s(2,d=!0),2e3),setTimeout(()=>i("done"),6e3)}return e.$$set=w=>{"delay"in w&&s(4,n=w.delay)},[a,u,d,m,n]}class We extends W{constructor(t){super(),z(this,t,Ge,Be,Z,{delay:4})}}var ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(e){var t=e.default;if(typeof t=="function"){var s=function(){return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(s,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),s}var Me={exports:{}};const Ze={},Xe=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"})),ne=ze(Xe);var B={exports:{}};const Fe=/^\u0001ACTION ([^\u0001]+)\u0001$/,Qe=/^(justinfan)(\d+$)/,Ye=/\\([sn:r\\])/g,Ke=/([ \n;\r\\])/g,me={s:" ",n:"",":":";",r:""},fe={" ":"s","\n":"n",";":":","\r":"r"},et=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),tt=/[|\\^$*+?:#]/,X=B.exports={get:(e,t)=>typeof e>"u"?t:e,hasOwn:(e,t)=>({}).hasOwnProperty.call(e,t),promiseDelay:e=>new Promise(t=>setTimeout(t,e)),isFinite:e=>isFinite(e)&&!isNaN(parseFloat(e)),toNumber(e,t){if(e===null)return 0;const s=Math.pow(10,X.isFinite(t)?t:0);return Math.round(e*s)/s},isInteger:e=>!isNaN(X.toNumber(e,0)),isRegex:e=>tt.test(e),isURL:e=>et.test(e),justinfan:()=>`justinfan${Math.floor(Math.random()*8e4+1e3)}`,isJustinfan:e=>Qe.test(e),channel(e){const t=(e||"").toLowerCase();return t[0]==="#"?t:"#"+t},username(e){const t=(e||"").toLowerCase();return t[0]==="#"?t.slice(1):t},token:e=>e?e.toLowerCase().replace("oauth:",""):"",password(e){const t=X.token(e);return t?`oauth:${t}`:""},actionMessage:e=>e.match(Fe),replaceAll(e,t){if(e===null||typeof e>"u")return null;for(const s in t)e=e.replace(new RegExp(s,"g"),t[s]);return e},unescapeHtml:e=>e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC(e){return!e||typeof e!="string"||!e.includes("\\")?e:e.replace(Ye,(t,s)=>s in me?me[s]:s)},escapeIRC(e){return!e||typeof e!="string"?e:e.replace(Ke,(t,s)=>s in fe?`\\${fe[s]}`:s)},addWord:(e,t)=>e.length?e+" "+t:e+t,splitLine(e,t){let s=e.substring(0,t).lastIndexOf(" ");return s===-1&&(s=t-1),[e.substring(0,s),e.substring(s+1)]},extractNumber(e){const t=e.split(" ");for(let s=0;s<t.length;s++)if(X.isInteger(t[s]))return~~t[s];return 0},formatDate(e){let t=e.getHours(),s=e.getMinutes();return t=(t<10?"0":"")+t,s=(s<10?"0":"")+s,`${t}:${s}`},inherits(e,t){e.super_=t;const s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e},isNode(){try{return typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"}catch{}return!1}},st=ne,pe=B.exports;var it=function(t,s){let i=t.url!==void 0?t.url:t.uri;if(pe.isURL(i)||(i=`https://api.twitch.tv/kraken${i[0]==="/"?i:`/${i}`}`),pe.isNode()){const n=Object.assign({method:"GET",json:!0},t);n.qs&&(i+=`?${new URLSearchParams(n.qs)}`);const a={};"fetchAgent"in this.opts.connection&&(a.agent=this.opts.connection.fetchAgent);const u=st(i,{...a,method:n.method,headers:n.headers,body:n.body});let d={};u.then(m=>(d={statusCode:m.status,headers:m.headers},n.json?m.json():m.text())).then(m=>s(null,d,m),m=>s(m,d,null))}else{const n=Object.assign({method:"GET",headers:{}},t,{url:i}),a=new XMLHttpRequest;a.open(n.method,n.url,!0);for(const u in n.headers)a.setRequestHeader(u,n.headers[u]);a.responseType="json",a.addEventListener("load",u=>{a.readyState===4&&(a.status!==200?s(a.status,null,null):s(null,null,a.response))}),a.send()}};const _=B.exports;function de(e,t){return e=_.channel(e),t=_.get(t,30),this._sendCommand(null,e,`/followers ${t}`,(s,i)=>{this.once("_promiseFollowers",n=>{n?i(n):s([e,~~t])})})}function _e(e){return e=_.channel(e),this._sendCommand(null,e,"/followersoff",(t,s)=>{this.once("_promiseFollowersoff",i=>{i?s(i):t([e])})})}function ge(e){return e=_.channel(e),this._sendCommand(null,null,`PART ${e}`,(t,s)=>{this.once("_promisePart",i=>{i?s(i):t([e])})})}function be(e){return e=_.channel(e),this._sendCommand(null,e,"/r9kbeta",(t,s)=>{this.once("_promiseR9kbeta",i=>{i?s(i):t([e])})})}function we(e){return e=_.channel(e),this._sendCommand(null,e,"/r9kbetaoff",(t,s)=>{this.once("_promiseR9kbetaoff",i=>{i?s(i):t([e])})})}function ve(e,t){return e=_.channel(e),t=_.get(t,300),this._sendCommand(null,e,`/slow ${t}`,(s,i)=>{this.once("_promiseSlow",n=>{n?i(n):s([e,~~t])})})}function ye(e){return e=_.channel(e),this._sendCommand(null,e,"/slowoff",(t,s)=>{this.once("_promiseSlowoff",i=>{i?s(i):t([e])})})}var nt={action(e,t){return e=_.channel(e),t=`ACTION ${t}`,this._sendMessage(this._getPromiseDelay(),e,t,(s,i)=>{s([e,t])})},ban(e,t,s){return e=_.channel(e),t=_.username(t),s=_.get(s,""),this._sendCommand(null,e,`/ban ${t} ${s}`,(i,n)=>{this.once("_promiseBan",a=>{a?n(a):i([e,t,s])})})},clear(e){return e=_.channel(e),this._sendCommand(null,e,"/clear",(t,s)=>{this.once("_promiseClear",i=>{i?s(i):t([e])})})},color(e,t){return t=_.get(t,e),this._sendCommand(null,"#tmijs",`/color ${t}`,(s,i)=>{this.once("_promiseColor",n=>{n?i(n):s([t])})})},commercial(e,t){return e=_.channel(e),t=_.get(t,30),this._sendCommand(null,e,`/commercial ${t}`,(s,i)=>{this.once("_promiseCommercial",n=>{n?i(n):s([e,~~t])})})},deletemessage(e,t){return e=_.channel(e),this._sendCommand(null,e,`/delete ${t}`,(s,i)=>{this.once("_promiseDeletemessage",n=>{n?i(n):s([e])})})},emoteonly(e){return e=_.channel(e),this._sendCommand(null,e,"/emoteonly",(t,s)=>{this.once("_promiseEmoteonly",i=>{i?s(i):t([e])})})},emoteonlyoff(e){return e=_.channel(e),this._sendCommand(null,e,"/emoteonlyoff",(t,s)=>{this.once("_promiseEmoteonlyoff",i=>{i?s(i):t([e])})})},followersonly:de,followersmode:de,followersonlyoff:_e,followersmodeoff:_e,host(e,t){return e=_.channel(e),t=_.username(t),this._sendCommand(2e3,e,`/host ${t}`,(s,i)=>{this.once("_promiseHost",(n,a)=>{n?i(n):s([e,t,~~a])})})},join(e){return e=_.channel(e),this._sendCommand(void 0,null,`JOIN ${e}`,(t,s)=>{const i="_promiseJoin";let n=!1;const a=(d,m)=>{e===_.channel(m)&&(this.removeListener(i,a),n=!0,d?s(d):t([e]))};this.on(i,a);const u=this._getPromiseDelay();_.promiseDelay(u).then(()=>{n||this.emit(i,"No response from Twitch.",e)})})},mod(e,t){return e=_.channel(e),t=_.username(t),this._sendCommand(null,e,`/mod ${t}`,(s,i)=>{this.once("_promiseMod",n=>{n?i(n):s([e,t])})})},mods(e){return e=_.channel(e),this._sendCommand(null,e,"/mods",(t,s)=>{this.once("_promiseMods",(i,n)=>{i?s(i):(n.forEach(a=>{this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(a)||this.moderators[e].push(a)}),t(n))})})},part:ge,leave:ge,ping(){return this._sendCommand(null,null,"PING",(e,t)=>{this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},_.get(this.opts.connection.timeout,9999)),this.once("_promisePing",s=>e([parseFloat(s)]))})},r9kbeta:be,r9kmode:be,r9kbetaoff:we,r9kmodeoff:we,raw(e){return this._sendCommand(null,null,e,(t,s)=>{t([e])})},say(e,t){return e=_.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?t.substr(1,3)==="me "?this.action(e,t.substr(4)):this._sendCommand(null,e,t,(s,i)=>{s([e,t])}):this._sendMessage(this._getPromiseDelay(),e,t,(s,i)=>{s([e,t])})},slow:ve,slowmode:ve,slowoff:ye,slowmodeoff:ye,subscribers(e){return e=_.channel(e),this._sendCommand(null,e,"/subscribers",(t,s)=>{this.once("_promiseSubscribers",i=>{i?s(i):t([e])})})},subscribersoff(e){return e=_.channel(e),this._sendCommand(null,e,"/subscribersoff",(t,s)=>{this.once("_promiseSubscribersoff",i=>{i?s(i):t([e])})})},timeout(e,t,s,i){return e=_.channel(e),t=_.username(t),s!==null&&!_.isInteger(s)&&(i=s,s=300),s=_.get(s,300),i=_.get(i,""),this._sendCommand(null,e,`/timeout ${t} ${s} ${i}`,(n,a)=>{this.once("_promiseTimeout",u=>{u?a(u):n([e,t,~~s,i])})})},unban(e,t){return e=_.channel(e),t=_.username(t),this._sendCommand(null,e,`/unban ${t}`,(s,i)=>{this.once("_promiseUnban",n=>{n?i(n):s([e,t])})})},unhost(e){return e=_.channel(e),this._sendCommand(2e3,e,"/unhost",(t,s)=>{this.once("_promiseUnhost",i=>{i?s(i):t([e])})})},unmod(e,t){return e=_.channel(e),t=_.username(t),this._sendCommand(null,e,`/unmod ${t}`,(s,i)=>{this.once("_promiseUnmod",n=>{n?i(n):s([e,t])})})},unvip(e,t){return e=_.channel(e),t=_.username(t),this._sendCommand(null,e,`/unvip ${t}`,(s,i)=>{this.once("_promiseUnvip",n=>{n?i(n):s([e,t])})})},vip(e,t){return e=_.channel(e),t=_.username(t),this._sendCommand(null,e,`/vip ${t}`,(s,i)=>{this.once("_promiseVip",n=>{n?i(n):s([e,t])})})},vips(e){return e=_.channel(e),this._sendCommand(null,e,"/vips",(t,s)=>{this.once("_promiseVips",(i,n)=>{i?s(i):t(n)})})},whisper(e,t){return e=_.username(e),e===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${e} ${t}`,(s,i)=>{this.once("_promiseWhisper",n=>{n&&i(n)})}).catch(s=>{if(s&&typeof s=="string"&&s.indexOf("No response from Twitch.")!==0)throw s;const i=_.channel(e),n=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[i,n,t,!0],[i,n,t,!0]]),[e,t]})}};function O(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var ot=O;O.EventEmitter=O;O.prototype._events=void 0;O.prototype._maxListeners=void 0;O.defaultMaxListeners=10;O.prototype.setMaxListeners=function(e){if(!rt(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};O.prototype.emit=function(e){var t,s,i,n,a,u;if(this._events||(this._events={}),e==="error"&&(!this._events.error||G(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(s=this._events[e],Re(s))return!1;if(U(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),s.apply(this,n)}else if(G(s))for(n=Array.prototype.slice.call(arguments,1),u=s.slice(),i=u.length,a=0;a<i;a++)u[a].apply(this,n);return!0};O.prototype.addListener=function(e,t){var s;if(!U(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,U(t.listener)?t.listener:t),this._events[e]?G(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,G(this._events[e])&&!this._events[e].warned&&(Re(this._maxListeners)?s=O.defaultMaxListeners:s=this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};O.prototype.on=O.prototype.addListener;O.prototype.once=function(e,t){if(!U(t))throw TypeError("listener must be a function");var s=!1;if(this._events.hasOwnProperty(e)&&e.charAt(0)==="_"){var i=1,n=e;for(var a in this._events)this._events.hasOwnProperty(a)&&a.startsWith(n)&&i++;e=e+i}function u(){e.charAt(0)==="_"&&!isNaN(e.substr(e.length-1))&&(e=e.substring(0,e.length-1)),this.removeListener(e,u),s||(s=!0,t.apply(this,arguments))}return u.listener=t,this.on(e,u),this};O.prototype.removeListener=function(e,t){var s,i,n,a;if(!U(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=this._events[e],n=s.length,i=-1,s===t||U(s.listener)&&s.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&e.charAt(0)==="_"){var u=e;for(var d in this._events)this._events.hasOwnProperty(d)&&d.startsWith(u)&&(isNaN(parseInt(d.substr(d.length-1)))||(this._events[e+parseInt(d.substr(d.length-1)-1)]=this._events[d],delete this._events[d]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(G(s)){for(a=n;a-- >0;)if(s[a]===t||s[a].listener&&s[a].listener===t){i=a;break}if(i<0)return this;s.length===1?(s.length=0,delete this._events[e]):s.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};O.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[e],U(s))this.removeListener(e,s);else if(s)for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this};O.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:U(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};O.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(U(t))return 1;if(t)return t.length}return 0};O.listenerCount=function(e,t){return e.listenerCount(t)};function U(e){return typeof e=="function"}function rt(e){return typeof e=="number"}function G(e){return typeof e=="object"&&e!==null}function Re(e){return e===void 0}const at=B.exports;let Le="info";const Ce={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function q(e){return function(t){Ce[e]>=Ce[Le]&&console.log(`[${at.formatDate(new Date)}] ${e}: ${t}`)}}var lt={setLevel(e){Le=e},trace:q("trace"),debug:q("debug"),info:q("info"),warn:q("warn"),error:q("error"),fatal:q("fatal")};const se=B.exports,H=/\S+/g;function ie(e,t,s=",",i="/",n){const a=e[t];if(a===void 0)return e;const u=typeof a=="string";if(e[t+"-raw"]=u?a:null,a===!0)return e[t]=null,e;if(e[t]={},u){const d=a.split(s);for(let m=0;m<d.length;m++){const w=d[m].split(i);let c=w[1];n!==void 0&&c&&(c=c.split(n)),e[t][w[0]]=c||null}}return e}var ct={badges:e=>ie(e,"badges"),badgeInfo:e=>ie(e,"badge-info"),emotes:e=>ie(e,"emotes","/",":",","),emoteRegex(e,t,s,i){H.lastIndex=0;const n=new RegExp("(\\b|^|\\s)"+se.unescapeHtml(t)+"(\\b|$|\\s)");let a;for(;(a=H.exec(e))!==null;)n.test(a[0])&&(i[s]=i[s]||[],i[s].push([a.index,H.lastIndex-1]))},emoteString(e,t,s,i){H.lastIndex=0;let n;for(;(n=H.exec(e))!==null;)n[0]===se.unescapeHtml(t)&&(i[s]=i[s]||[],i[s].push([n.index,H.lastIndex-1]))},transformEmotes(e){let t="";return Object.keys(e).forEach(s=>{t=`${t+s}:`,e[s].forEach(i=>t=`${t+i.join("-")},`),t=`${t.slice(0,-1)}/`}),t.slice(0,-1)},formTags(e){const t=[];for(const s in e){const i=se.escapeIRC(e[s]);t.push(`${s}=${i}`)}return`@${t.join(";")}`},msg(e){const t={raw:e,tags:{},prefix:null,command:null,params:[]};let s=0,i=0;if(e.charCodeAt(0)===64){if(i=e.indexOf(" "),i===-1)return null;const n=e.slice(1,i).split(";");for(let a=0;a<n.length;a++){const u=n[a],d=u.split("=");t.tags[d[0]]=u.substring(u.indexOf("=")+1)||!0}s=i+1}for(;e.charCodeAt(s)===32;)s++;if(e.charCodeAt(s)===58){if(i=e.indexOf(" ",s),i===-1)return null;for(t.prefix=e.slice(s+1,i),s=i+1;e.charCodeAt(s)===32;)s++}if(i=e.indexOf(" ",s),i===-1)return e.length>s?(t.command=e.slice(s),t):null;for(t.command=e.slice(s,i),s=i+1;e.charCodeAt(s)===32;)s++;for(;s<e.length;){if(i=e.indexOf(" ",s),e.charCodeAt(s)===58){t.params.push(e.slice(s+1));break}if(i!==-1){for(t.params.push(e.slice(s,i)),s=i+1;e.charCodeAt(s)===32;)s++;continue}if(i===-1){t.params.push(e.slice(s));break}}return t}};class ht{constructor(t){this.queue=[],this.index=0,this.defaultDelay=t===void 0?3e3:t}add(t,s){this.queue.push({fn:t,delay:s})}next(){const t=this.index++,s=this.queue[t];if(!s)return;const i=this.queue[this.index];if(s.fn(),i){const n=i.delay===void 0?this.defaultDelay:i.delay;setTimeout(()=>this.next(),n)}}}var ut=ht;(function(e){const t=typeof ue<"u"?ue:typeof window<"u"?window:{},s=t.WebSocket||ne,i=t.fetch||ne,n=it,a=nt,u=ot.EventEmitter,d=lt,m=ct,w=ut,c=B.exports;let M=!1;const v=function y(r){if(!(this instanceof y))return new y(r);this.opts=c.get(r,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=c.get(this.opts.options.clientId,null),this._globalDefaultChannel=c.channel(c.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=c.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=c.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=c.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=c.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=c.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=c.get(this.opts.connection.reconnect,!0),this.reconnectDecay=c.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=c.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=c.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let o="error";this.opts.options.debug&&(o="info"),this.log=this.opts.logger||d;try{d.setLevel(o)}catch{}this.opts.channels.forEach((l,g,f)=>f[g]=c.channel(l)),u.call(this),this.setMaxListeners(0)};c.inherits(v,u);for(const y in a)v.prototype[y]=a[y];v.prototype.emits=function(r,o){for(let l=0;l<r.length;l++){const g=l<o.length?o[l]:o[o.length-1];this.emit.apply(this,[r[l]].concat(g))}},v.prototype.api=function(...y){M||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),M=!0),n(...y)},v.prototype.handleMessage=function(r){if(!r)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(r)),r);const o=c.channel(c.get(r.params[0],null));let l=c.get(r.params[1],null);const g=c.get(r.tags["msg-id"],null),f=r.tags=m.badges(m.badgeInfo(m.emotes(r.tags)));for(const h in f){if(h==="emote-sets"||h==="ban-duration"||h==="bits")continue;let p=f[h];typeof p=="boolean"?p=null:p==="1"?p=!0:p==="0"?p=!1:typeof p=="string"&&(p=c.unescapeIRC(p)),f[h]=p}if(r.prefix===null)switch(r.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const h=new Date;this.currentLatency=(h.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:
${JSON.stringify(r,null,4)}`);break}else if(r.prefix==="tmi.twitch.tv")switch(r.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=r.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))},c.get(this.opts.connection.timeout,9999))},6e4);let h=c.get(this.opts.options.joinInterval,2e3);h<300&&(h=300);const p=new w(h),k=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let R=0;R<k.length;R++){const T=k[R];p.add(()=>{this._isConnected()&&this.join(T).catch(A=>this.log.error(A))})}p.next();break}case"NOTICE":{const h=[null],p=[o,g,l],k=[g],R=[o,!0],T=[o,!1],A=[p,h],C=[p,k],b=`[${o}] ${l}`;switch(g){case"subs_on":this.log.info(`[${o}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[R,R,h]);break;case"subs_off":this.log.info(`[${o}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[T,T,h]);break;case"emote_only_on":this.log.info(`[${o}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[R,h]);break;case"emote_only_off":this.log.info(`[${o}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[T,h]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${o}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[R,R,h]);break;case"r9k_off":this.log.info(`[${o}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[T,T,h]);break;case"room_mods":{const L=l.split(": "),P=(L.length>1?L[1]:"").toLowerCase().split(", ").filter(te=>te);this.emits(["_promiseMods","mods"],[[null,P],[o,P]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[o,[]]]);break;case"vips_success":{l.endsWith(".")&&(l=l.slice(0,-1));const L=l.split(": "),P=(L.length>1?L[1]:"").toLowerCase().split(", ").filter(te=>te);this.emits(["_promiseVips","vips"],[[null,P],[o,P]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[o,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(b),this.emits(["notice","_promiseBan"],C);break;case"ban_success":this.log.info(b),this.emits(["notice","_promiseBan"],A);break;case"usage_clear":this.log.info(b),this.emits(["notice","_promiseClear"],C);break;case"usage_mods":this.log.info(b),this.emits(["notice","_promiseMods"],[p,[g,[]]]);break;case"mod_success":this.log.info(b),this.emits(["notice","_promiseMod"],A);break;case"usage_vips":this.log.info(b),this.emits(["notice","_promiseVips"],[p,[g,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(b),this.emits(["notice","_promiseVip"],[p,[g,[]]]);break;case"vip_success":this.log.info(b),this.emits(["notice","_promiseVip"],A);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(b),this.emits(["notice","_promiseMod"],C);break;case"unmod_success":this.log.info(b),this.emits(["notice","_promiseUnmod"],A);break;case"unvip_success":this.log.info(b),this.emits(["notice","_promiseUnvip"],A);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(b),this.emits(["notice","_promiseUnmod"],C);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(b),this.emits(["notice","_promiseUnvip"],C);break;case"color_changed":this.log.info(b),this.emits(["notice","_promiseColor"],A);break;case"usage_color":case"turbo_only_color":this.log.info(b),this.emits(["notice","_promiseColor"],C);break;case"commercial_success":this.log.info(b),this.emits(["notice","_promiseCommercial"],A);break;case"usage_commercial":case"bad_commercial_error":this.log.info(b),this.emits(["notice","_promiseCommercial"],C);break;case"hosts_remaining":{this.log.info(b);const L=isNaN(l[0])?0:parseInt(l[0]);this.emits(["notice","_promiseHost"],[p,[null,~~L]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(b),this.emits(["notice","_promiseHost"],[p,[g,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(b),this.emits(["notice","_promiseR9kbeta"],C);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(b),this.emits(["notice","_promiseR9kbetaoff"],C);break;case"timeout_success":this.log.info(b),this.emits(["notice","_promiseTimeout"],A);break;case"delete_message_success":this.log.info(`[${o} ${l}]`),this.emits(["notice","_promiseDeletemessage"],A);break;case"already_subs_off":case"usage_subs_off":this.log.info(b),this.emits(["notice","_promiseSubscribersoff"],C);break;case"already_subs_on":case"usage_subs_on":this.log.info(b),this.emits(["notice","_promiseSubscribers"],C);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(b),this.emits(["notice","_promiseEmoteonlyoff"],C);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(b),this.emits(["notice","_promiseEmoteonly"],C);break;case"usage_slow_on":this.log.info(b),this.emits(["notice","_promiseSlow"],C);break;case"usage_slow_off":this.log.info(b),this.emits(["notice","_promiseSlowoff"],C);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(b),this.emits(["notice","_promiseTimeout"],C);break;case"untimeout_success":case"unban_success":this.log.info(b),this.emits(["notice","_promiseUnban"],A);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(b),this.emits(["notice","_promiseUnban"],C);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(b),this.emits(["notice","_promiseDeletemessage"],C);break;case"usage_unhost":case"not_hosting":this.log.info(b),this.emits(["notice","_promiseUnhost"],C);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(b),this.emits(["notice","_promiseWhisper"],C);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(b),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[p,[g,o]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(b),this.emit("automod",o,g,l);break;case"unrecognized_cmd":this.log.info(b),this.emit("notice",o,g,l);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(b),this.emit("notice",o,g,l);break;case"host_on":case"host_off":break;default:l.includes("Login unsuccessful")||l.includes("Login authentication failed")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=l,this.log.error(this.reason),this.ws.close()):l.includes("Error logging in")||l.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=l,this.log.error(this.reason),this.ws.close()):l.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:
${JSON.stringify(r,null,4)}`),this.emit("notice",o,g,l));break}break}case"USERNOTICE":{const h=f["display-name"]||f.login,p=f["msg-param-sub-plan"]||"",k=c.unescapeIRC(c.get(f["msg-param-sub-plan-name"],""))||null,T={prime:p.includes("Prime"),plan:p,planName:k},A=~~(f["msg-param-streak-months"]||0),C=f["msg-param-recipient-display-name"]||f["msg-param-recipient-user-name"],b=~~f["msg-param-mass-gift-count"];switch(f["message-type"]=g,g){case"resub":this.emits(["resub","subanniversary"],[[o,h,A,l,f,T]]);break;case"sub":this.emits(["subscription","sub"],[[o,h,T,l,f]]);break;case"subgift":this.emit("subgift",o,h,A,C,T,f);break;case"anonsubgift":this.emit("anonsubgift",o,A,C,T,f);break;case"submysterygift":this.emit("submysterygift",o,h,b,T,f);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",o,b,T,f);break;case"primepaidupgrade":this.emit("primepaidupgrade",o,h,T,f);break;case"giftpaidupgrade":{const L=f["msg-param-sender-name"]||f["msg-param-sender-login"];this.emit("giftpaidupgrade",o,h,L,f);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",o,h,f);break;case"raid":{const L=f["msg-param-displayName"]||f["msg-param-login"],P=+f["msg-param-viewerCount"];this.emit("raided",o,L,P,f);break}case"ritual":{const L=f["msg-param-ritual-name"];switch(L){case"new_chatter":this.emit("newchatter",o,h,f,l);break;default:this.emit("ritual",L,o,h,f,l);break}break}default:this.emit("usernotice",g,o,f,l);break}break}case"HOSTTARGET":{const h=l.split(" "),p=~~h[1]||0;h[0]==="-"?(this.log.info(`[${o}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[o,p],[null]])):(this.log.info(`[${o}] Now hosting ${h[0]} for ${p} viewer(s).`),this.emit("hosting",o,h[0],p));break}case"CLEARCHAT":if(r.params.length>1){const h=c.get(r.tags["ban-duration"],null);h===null?(this.log.info(`[${o}] ${l} has been banned.`),this.emit("ban",o,l,null,r.tags)):(this.log.info(`[${o}] ${l} has been timed out for ${h} seconds.`),this.emit("timeout",o,l,null,~~h,r.tags))}else this.log.info(`[${o}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[o],[null]]);break;case"CLEARMSG":if(r.params.length>1){const h=l,p=f.login;f["message-type"]="messagedeleted",this.log.info(`[${o}] ${p}'s message has been deleted.`),this.emit("messagedeleted",o,p,h,f)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch(h=>this.log.error(h)),setTimeout(()=>this.connect().catch(h=>this.log.error(h)),this.reconnectTimer);break;case"USERSTATE":r.tags.username=this.username,r.tags["user-type"]==="mod"&&(this.moderators[o]||(this.moderators[o]=[]),this.moderators[o].includes(this.username)||this.moderators[o].push(this.username)),!c.isJustinfan(this.getUsername())&&!this.userstate[o]&&(this.userstate[o]=f,this.lastJoined=o,this.channels.push(o),this.log.info(`Joined ${o}`),this.emit("join",o,c.username(this.getUsername()),!0)),r.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(r.tags["emote-sets"]),this.userstate[o]=f;break;case"GLOBALUSERSTATE":this.globaluserstate=f,this.emit("globaluserstate",f),typeof r.tags["emote-sets"]<"u"&&this._updateEmoteset(r.tags["emote-sets"]);break;case"ROOMSTATE":if(c.channel(this.lastJoined)===o&&this.emit("_promiseJoin",null,o),r.tags.channel=o,this.emit("roomstate",o,r.tags),!c.hasOwn(r.tags,"subs-only")){if(c.hasOwn(r.tags,"slow"))if(typeof r.tags.slow=="boolean"&&!r.tags.slow){const h=[o,!1,0];this.log.info(`[${o}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[h,h,[null]])}else{const h=~~r.tags.slow,p=[o,!0,h];this.log.info(`[${o}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[p,p,[null]])}if(c.hasOwn(r.tags,"followers-only"))if(r.tags["followers-only"]==="-1"){const h=[o,!1,0];this.log.info(`[${o}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[h,h,[null]])}else{const h=~~r.tags["followers-only"],p=[o,!0,h];this.log.info(`[${o}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[p,p,[null]])}}break;case"SERVERCHANGE":break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:
${JSON.stringify(r,null,4)}`);break}else if(r.prefix==="jtv")switch(r.command){case"MODE":l==="+o"?(this.moderators[o]||(this.moderators[o]=[]),this.moderators[o].includes(r.params[2])||this.moderators[o].push(r.params[2]),this.emit("mod",o,r.params[2])):l==="-o"&&(this.moderators[o]||(this.moderators[o]=[]),this.moderators[o].filter(h=>h!==r.params[2]),this.emit("unmod",o,r.params[2]));break;default:this.log.warn(`Could not parse message from jtv:
${JSON.stringify(r,null,4)}`);break}else switch(r.command){case"353":this.emit("names",r.params[2],r.params[3].split(" "));break;case"366":break;case"JOIN":{const h=r.prefix.split("!")[0];c.isJustinfan(this.getUsername())&&this.username===h&&(this.lastJoined=o,this.channels.push(o),this.log.info(`Joined ${o}`),this.emit("join",o,h,!0)),this.username!==h&&this.emit("join",o,h,!1);break}case"PART":{let h=!1;const p=r.prefix.split("!")[0];if(this.username===p){h=!0,this.userstate[o]&&delete this.userstate[o];let k=this.channels.indexOf(o);k!==-1&&this.channels.splice(k,1),k=this.opts.channels.indexOf(o),k!==-1&&this.opts.channels.splice(k,1),this.log.info(`Left ${o}`),this.emit("_promisePart",null)}this.emit("part",o,p,h);break}case"WHISPER":{const h=r.prefix.split("!")[0];this.log.info(`[WHISPER] <${h}>: ${l}`),c.hasOwn(r.tags,"username")||(r.tags.username=h),r.tags["message-type"]="whisper";const p=c.channel(r.tags.username);this.emits(["whisper","message"],[[p,r.tags,l,!1]]);break}case"PRIVMSG":if(r.tags.username=r.prefix.split("!")[0],r.tags.username==="jtv"){const h=c.username(l.split(" ")[0]),p=l.includes("auto");if(l.includes("hosting you for")){const k=c.extractNumber(l);this.emit("hosted",o,h,k,p)}else l.includes("hosting you")&&this.emit("hosted",o,h,0,p)}else{const h=c.get(this.opts.options.messagesLogLevel,"info"),p=c.actionMessage(l);if(r.tags["message-type"]=p?"action":"chat",l=p?p[1]:l,c.hasOwn(r.tags,"bits"))this.emit("cheer",o,r.tags,l);else{if(c.hasOwn(r.tags,"msg-id")){if(r.tags["msg-id"]==="highlighted-message"){const k=r.tags["msg-id"];this.emit("redeem",o,r.tags.username,k,r.tags,l)}else if(r.tags["msg-id"]==="skip-subs-mode-message"){const k=r.tags["msg-id"];this.emit("redeem",o,r.tags.username,k,r.tags,l)}}else if(c.hasOwn(r.tags,"custom-reward-id")){const k=r.tags["custom-reward-id"];this.emit("redeem",o,r.tags.username,k,r.tags,l)}p?(this.log[h](`[${o}] *<${r.tags.username}>: ${l}`),this.emits(["action","message"],[[o,r.tags,l,!1]])):(this.log[h](`[${o}] <${r.tags.username}>: ${l}`),this.emits(["chat","message"],[[o,r.tags,l,!1]]))}}break;default:this.log.warn(`Could not parse message:
${JSON.stringify(r,null,4)}`);break}},v.prototype.connect=function(){return new Promise((r,o)=>{this.server=c.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=c.get(this.opts.connection.port,80),this.secure&&(this.port=443),this.port===443&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",l=>{l?o(l):r([this.server,~~this.port])})})},v.prototype._openConnection=function(){const r=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,o={};"agent"in this.opts.connection&&(o.agent=this.opts.connection.agent),this.ws=new s(r,"irc",o),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},v.prototype._onOpen=function(){!this._isConnected()||(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=c.get(this.opts.identity.username,c.justinfan()),this._getToken().then(r=>{const o=c.password(r);this.log.info("Sending authentication to server.."),this.emit("logon");let l="twitch.tv/tags twitch.tv/commands";this._skipMembership||(l+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+l),o?this.ws.send(`PASS ${o}`):c.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)}).catch(r=>{this.emits(["_promiseConnect","disconnected"],[[r],["Could not get a token."]])}))},v.prototype._getToken=function(){const r=this.opts.identity.password;let o;return typeof r=="function"?(o=r(),o instanceof Promise?o:Promise.resolve(o)):Promise.resolve(r)},v.prototype._onMessage=function(r){r.data.trim().split(`\r
`).forEach(l=>{const g=m.msg(l);g&&this.handleMessage(g)})},v.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=this.ws===null?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(r=>this.log.error(r))},this.reconnectTimer)),this.ws=null},v.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(r=>this.log.error(r))},this.reconnectTimer))),this.ws=null},v.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},v.prototype._sendCommand=function(r,o,l,g){return new Promise((f,h)=>{if(this._isConnected())(r===null||typeof r=="number")&&(r===null&&(r=this._getPromiseDelay()),c.promiseDelay(r).then(()=>h("No response from Twitch.")));else return h("Not connected to server.");if(o!==null){const p=c.channel(o);this.log.info(`[${p}] Executing command: ${l}`),this.ws.send(`PRIVMSG ${p} :${l}`)}else this.log.info(`Executing command: ${l}`),this.ws.send(l);typeof g=="function"?g(f,h):f()})},v.prototype._sendMessage=function(r,o,l,g){return new Promise((f,h)=>{if(this._isConnected()){if(c.isJustinfan(this.getUsername()))return h("Cannot send anonymous messages.")}else return h("Not connected to server.");const p=c.channel(o);if(this.userstate[p]||(this.userstate[p]={}),l.length>=500){const C=c.splitLine(l,500);l=C[0],setTimeout(()=>{this._sendMessage(r,o,C[1],()=>{})},350)}this.ws.send(`PRIVMSG ${p} :${l}`);const k={};Object.keys(this.emotesets).forEach(C=>this.emotesets[C].forEach(b=>(c.isRegex(b.code)?m.emoteRegex:m.emoteString)(l,b.code,b.id,k)));const R=Object.assign(this.userstate[p],m.emotes({emotes:m.transformEmotes(k)||null})),T=c.get(this.opts.options.messagesLogLevel,"info"),A=c.actionMessage(l);A?(R["message-type"]="action",this.log[T](`[${p}] *<${this.getUsername()}>: ${A[1]}`),this.emits(["action","message"],[[p,R,A[1],!0]])):(R["message-type"]="chat",this.log[T](`[${p}] <${this.getUsername()}>: ${l}`),this.emits(["chat","message"],[[p,R,l,!0]])),typeof g=="function"?g(f,h):f()})},v.prototype._updateEmoteset=function(r){let o=r!==void 0;if(o&&(r===this.emotes?o=!1:this.emotes=r),this._skipUpdatingEmotesets){o&&this.emit("emotesets",r,{});return}const l=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout(()=>this._updateEmoteset(r),this._updateEmotesetsTimerDelay))};this._getToken().then(g=>{const f=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${r}`,h={};return"fetchAgent"in this.opts.connection&&(h.agent=this.opts.connection.fetchAgent),i(f,{...h,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${c.token(g)}`,"Client-ID":this.clientId}})}).then(g=>g.json()).then(g=>{this.emotesets=g.emoticon_sets||{},this.emit("emotesets",r,this.emotesets),l()}).catch(()=>l())},v.prototype.getUsername=function(){return this.username},v.prototype.getOptions=function(){return this.opts},v.prototype.getChannels=function(){return this.channels},v.prototype.isMod=function(r,o){const l=c.channel(r);return this.moderators[l]||(this.moderators[l]=[]),this.moderators[l].includes(c.username(o))},v.prototype.readyState=function(){return this.ws===null?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},v.prototype._isConnected=function(){return this.ws!==null&&this.ws.readyState===1},v.prototype.disconnect=function(){return new Promise((r,o)=>{this.ws!==null&&this.ws.readyState!==3?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",()=>r([this.server,~~this.port]))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),o("Cannot disconnect from server. Socket is not opened or connection is already closing."))})},v.prototype.off=v.prototype.removeListener,e.exports&&(e.exports=v),typeof window<"u"&&(window.tmi={client:v,Client:v})})(Me);const ke=Me.exports;var mt={client:ke,Client:ke};function Ae(e,t,s){const i=e.slice();return i[3]=t[s],i}function Ee(e){let t,s=e[3]+"",i;return{c(){t=E("p"),i=V(s),I(t,"class","svelte-iv1ewz")},m(n,a){S(n,t,a),$(t,i)},p(n,a){a&1&&s!==(s=n[3]+"")&&oe(i,s)},d(n){n&&x(t)}}}function ft(e){let t,s=e[0],i=[];for(let n=0;n<s.length;n+=1)i[n]=Ee(Ae(e,s,n));return{c(){t=E("div");for(let n=0;n<i.length;n+=1)i[n].c();I(t,"class","messages svelte-iv1ewz")},m(n,a){S(n,t,a);for(let u=0;u<i.length;u+=1)i[u].m(t,null)},p(n,[a]){if(a&1){s=n[0];let u;for(u=0;u<s.length;u+=1){const d=Ae(n,s,u);i[u]?i[u].p(d,a):(i[u]=Ee(d),i[u].c(),i[u].m(t,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=s.length}},i:D,o:D,d(n){n&&x(t),Ue(i,n)}}}function pt(e,t,s){let i=[];function n(u){const d=(Math.random()*ae.length).toFixed(),w=ae[d].toLowerCase().split(" -- ")[0],c=`${u} est\xE1 ${w}`;if(s(0,i=[...i,c]),i.length>8){let M=i.slice(-8);s(0,i=[...M])}}let a=new mt.Client({channels:["danirod_"]});return a.on("message",(u,d,m,w)=>{const c=d["display-name"];n(c)}),a.connect(),[i]}class dt extends W{constructor(t){super(),z(this,t,pt,ft,Z,{})}}function _t(e){let t,s=Ie(e[0])+"",i;return{c(){t=E("p"),i=V(s),I(t,"class","counter svelte-1vatgvn")},m(n,a){S(n,t,a),$(t,i)},p(n,a){a&1&&s!==(s=Ie(n[0])+"")&&oe(i,s)},d(n){n&&x(t)}}}function gt(e){let t;return{c(){t=E("p"),t.textContent="VAMOS A EMPEZAR",I(t,"class","counter svelte-1vatgvn")},m(s,i){S(s,t,i)},p:D,d(s){s&&x(t)}}}function bt(e){let t,s,i,n,a,u;function d(c,M){return c[1]?gt:_t}let m=d(e),w=m(e);return a=new dt({}),{c(){t=E("div"),s=E("p"),s.textContent="PREPARANDO STREAM...",i=J(),w.c(),n=J(),Y(a.$$.fragment),I(s,"class","svelte-1vatgvn"),I(t,"class","block svelte-1vatgvn")},m(c,M){S(c,t,M),$(t,s),$(t,i),w.m(t,null),S(c,n,M),K(a,c,M),u=!0},p(c,[M]){m===(m=d(c))&&w?w.p(c,M):(w.d(1),w=m(c),w&&(w.c(),w.m(t,null)))},i(c){u||(N(a.$$.fragment,c),u=!0)},o(c){j(a.$$.fragment,c),u=!1},d(c){c&&x(t),w.d(),c&&x(n),ee(a,c)}}}function Te(e){return e>=10?e:`0${e}`}function Ie(e){const t=parseInt(e/60),s=parseInt(e%60);return`${Te(t)}:${Te(s)}`}function wt(e,t,s){let{minutes:i=0}=t,{limit:n=Date.now()+6e4*i}=t,a=0,u=!1;const d=setInterval(()=>{const m=Date.now();m>n?(s(1,u=!0),clearInterval(d)):s(0,a=parseInt((n-m)/1e3))},100);return e.$$set=m=>{"minutes"in m&&s(2,i=m.minutes),"limit"in m&&s(3,n=m.limit)},[a,u,i,n]}class vt extends W{constructor(t){super(),z(this,t,wt,bt,Z,{minutes:2,limit:3})}}const yt="/twitch-intro/assets/poweron.25461880.mp3";function Ct(e){let t,s,i,n;return s=new vt({props:{minutes:6}}),{c(){t=E("div"),Y(s.$$.fragment)},m(a,u){S(a,t,u),K(s,t,null),n=!0},p:D,i(a){n||(N(s.$$.fragment,a),xe(()=>{i||(i=F(t,Q,{},!0)),i.run(1)}),n=!0)},o(a){j(s.$$.fragment,a),i||(i=F(t,Q,{},!1)),i.run(0),n=!1},d(a){a&&x(t),ee(s),a&&i&&i.end()}}}function kt(e){let t,s,i,n;return s=new We({props:{delay:5e3}}),s.$on("done",e[1]),{c(){t=E("div"),Y(s.$$.fragment)},m(a,u){S(a,t,u),K(s,t,null),n=!0},p:D,i(a){n||(N(s.$$.fragment,a),xe(()=>{i||(i=F(t,Q,{},!0)),i.run(1)}),n=!0)},o(a){j(s.$$.fragment,a),i||(i=F(t,Q,{},!1)),i.run(0),n=!1},d(a){a&&x(t),ee(s),a&&i&&i.end()}}}function At(e){let t,s,i,n;const a=[kt,Ct],u=[];function d(m,w){return m[0]==1?0:m[0]==3?1:-1}return~(s=d(e))&&(i=u[s]=a[s](e)),{c(){t=E("div"),i&&i.c(),I(t,"class","screen svelte-3jpo7c")},m(m,w){S(m,t,w),~s&&u[s].m(t,null),n=!0},p(m,[w]){let c=s;s=d(m),s===c?~s&&u[s].p(m,w):(i&&($e(),j(u[c],1,1,()=>{u[c]=null}),Se()),~s?(i=u[s],i?i.p(m,w):(i=u[s]=a[s](m),i.c()),N(i,1),i.m(t,null)):i=null)},i(m){n||(N(i),n=!0)},o(m){j(i),n=!1},d(m){m&&x(t),~s&&u[s].d()}}}function Et(e,t,s){let i=1;const n=new Audio(yt);n.volume=.5,n.loop=!1,De(()=>{n.play()}),je(()=>{n.pause()});function a(){s(0,i++,i),setTimeout(()=>s(0,i++,i),2e3);const u=()=>{n.volume>.01?(n.volume-=.01,requestAnimationFrame(u)):(n.volume=0,n.pause())};requestAnimationFrame(u)}return[i,a]}class Tt extends W{constructor(t){super(),z(this,t,Et,At,Z,{})}}new Tt({target:document.querySelector("#app")});
